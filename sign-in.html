<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In | Revy Snow for Nerds</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="stylesheet" href="styles.css?v=50">
</head>
<body class="signin-page">
    <div class="signin-container">
        <nav class="top-nav">
            <a href="/" class="nav-brand">
                <svg class="nav-logo" viewBox="0 0 100 100">
                    <g stroke="currentColor" stroke-width="6" fill="none" stroke-linecap="round">
                        <line x1="50" y1="10" x2="50" y2="90" />
                        <line x1="10" y1="50" x2="90" y2="50" />
                        <line x1="21" y1="21" x2="79" y2="79" />
                        <line x1="79" y1="21" x2="21" y2="79" />
                        <line x1="50" y1="20" x2="40" y2="30" />
                        <line x1="50" y1="20" x2="60" y2="30" />
                        <line x1="50" y1="80" x2="40" y2="70" />
                        <line x1="50" y1="80" x2="60" y2="70" />
                    </g>
                </svg>
                <span class="nav-title">Snow for Nerds</span>
            </a>
            <div class="nav-menu">
                <div class="nav-dropdown-wrap">
                    <button class="nav-link nav-pro-btn">Pro</button>
                    <div class="nav-pro-dropdown">
                        <a href="/tv.html" class="nav-dropdown-item">TV Mode</a>
                        <a href="/calendar.html" class="nav-dropdown-item">Yearly Stats</a>
                    </div>
                </div>
                <a href="/about.html" class="nav-link">About</a>
            </div>
        </nav>

        <main class="signin-content">
            <div id="clerk-sign-in"></div>
        </main>

        <footer class="signin-footer">
            <p>Sign in to access TV Mode and manage your playlist</p>
        </footer>
    </div>

    <script src="auth.js"></script>
    <script>
        clerkReady.then((clerk) => {
            if (!clerk) return;
            const params = new URLSearchParams(window.location.search);
            const redirectUrl = params.get('redirect_url') || '/';

            if (clerk.user) {
                window.location.href = redirectUrl;
                return;
            }

            const signInDiv = document.getElementById('clerk-sign-in');
            clerk.mountSignIn(signInDiv, {
                afterSignInUrl: redirectUrl,
                afterSignUpUrl: redirectUrl,
                appearance: {
                    variables: {
                        colorPrimary: '#00ff88',
                        colorBackground: '#1a1a1a',
                        colorText: '#f0f0f0',
                        colorInputBackground: '#0a0a0a',
                        colorInputText: '#f0f0f0',
                        borderRadius: '0px'
                    }
                }
            });
        });
    </script>
</body>
</html>
